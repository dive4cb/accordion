<!DOCTYPE html>
<html lang="en">

<head>
    <title>Accessible Accordion Widget</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <!--    Style for accordion to W3C Spec-->
    <style>
        #tablist h2 {
            width: 100%;
            border: thin black solid;
            text-align: center;
            background-color: #eee;
            padding: 0;
            margin: 2px 0;
        }
        
        p.moreinfo {
            border: thin black solid;
            padding: 4px;
            margin: 0;
        }
        
        h2.clickme span {
            height: 12px;
            width: 12px;
            background-image: url("plus_minus_sprite.gif");
            display: inline-block;
        }
        
        h2.clickme span.minus {
            background-position: right;
        }
        
        h2.clickme span.plus {
            background-position: left;
        }
        
        :focus {
            outline: 4px solid blue;
        }
    </style>
    <!--    Style for simple accordion-->
    <style>
        #simpacc h2 {
            width: 100%;
            padding: 0;
            margin: 0;
        }
        
        #simpacc h2 button {
            font-weight: 700;
            font-size: 1em;
            width: 100%;
            border: thin black solid;
            text-align: center;
            background-color: #eee;
            padding: 0;
            margin: 2px 0;
        }
        
        p.simpmoreinfo {
            border: thin black solid;
            padding: 4px;
            margin: 0;
        }
        
        h2.simpclickme button span {
            height: 12px;
            width: 12px;
            background-image: url("plus_minus_sprite.gif");
            display: inline-block;
        }
        
        h2.simpclickme button span.minus {
            background-position: right;
        }
        
        h2.simpclickme button span.plus {
            background-position: left;
        }
        
        :focus {
            outline: 4px solid blue;
        }
    </style>
</head>

<body>

    <h1>Accessible Accordion Widget</h1>
    <h2>Authors</h2>
    <ul>
        <li>CB Averitt</li>
        <li>Birkir Gunnarsson</li>
        <li>Denis Boudreau</li>
    </ul>
    <h2>Widget Info</h2>
    <h3>Dates</h3>
    <table>
        <tr>
            <th>Date Created
            </th>
            <td>May 25, 2016
            </td>
        </tr>
        <tr>
            <th>Date Last Updated
            </th>
            <td>May 31, 2016
            </td>
        </tr>
    </table>

    <h3>Introduction</h3>
    <p>Information on an accessible accordion widget.</p>
    <p><a href="http://w3c.github.io/aria/practices/aria-practices.html#accordion">Based off the W3C WAI-ARIA Authoring Practices 1.1 Draft for accordion</a></p>
    <p>Practices progressive enhancement.</p>
    <p>Mobile/Responsive Design Friendly</p>
    <p><a href="https://validator.w3.org/nu/?doc=http%3A%2F%2Fa11yideas.com%2Ftestcode%2Faccordion.html">Validates HTML5</a></p>
    <p>Uses valid ARIA and passes automated accessibility testing by <a href="http://www.deque.com/products/axe/">aXe</a></p>
    <h2>Persona</h2>
    <p>Information on personas.</p>
    <h3>Accordion Live Example</h3>
    <div id="tablist">
        <h2 id="tab1" class="clickme">Topic 1 <span class="plus"></span></h2>
        <p id="moreinfo1" class="moreinfo">This is information on topic 1. And more information on topic 1. <a href="http://deque.com">This is a link to Deque and is used for testing purposes.</a> And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. <a href="http://deque.com">This is another link to Deque and is used for testing purposes.</a> And more information on topic 1. And more information on topic 1. And more information on topic 1.</p>

        <h2 id="tab2" class="clickme">Topic 2 <span class="plus"></span></h2>
        <p id="moreinfo2" class="moreinfo">This is information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. <a href="http://deque.com">This is a link to Deque and is used for testing purposes.</a> And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. <a href="http://deque.com">This is another link to Deque and is used for testing purposes.</a> And more information on topic 2. And more information on topic 2. And more information on topic 2. </p>

        <h2 id="tab3" class="clickme">Topic 3 <span class="plus"></span></h2>
        <p id="moreinfo3" class="moreinfo">This is information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. <a href="http://deque.com">This is a link to Deque and is used for testing purposes.</a> And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. <a href="http://deque.com">This is another link to Deque and is used for testing purposes.</a> And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. </p>
    </div>
    <h4>Code</h4>
    <h5>HTML</h5>
    <h5>CSS</h5>
    <h5>JavaScript</h5>
    <h3>Simplified Accordion Live Example (in development)</h3>
    <div id="simpacc">
        <h2 id="simpacc1" class="simpclickme"><button>Simple Topic 1 <span class="plus"></span></button></h2>
        <p class="simpmoreinfo">This is information on topic 1. And more information on topic 1. <a href="http://deque.com">This is a link to Deque and is used for testing purposes.</a> And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1. And more information on topic 1.</p>

        <h2 id="simpacc2" class="simpclickme"><button>Simple Topic 2 <span class="plus"></span></button></h2>
        <p class="simpmoreinfo">This is information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. <a href="http://deque.com">This is a link to Deque and is used for testing purposes.</a> And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. And more information on topic 2. </p>

        <h2 id="simpacc3" class="simpclickme"><button>Simple Topic 3 <span class="plus"></span></button></h2>
        <p class="simpmoreinfo">This is information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. <a href="http://deque.com">This is a link to Deque and is used for testing purposes.</a> And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. And more information on topic 3. </p>
    </div>
    <h4>Code</h4>
    <h5>HTML</h5>
    <h5>CSS</h5>
    <h5>JavaScript</h5>
    <h2>Temporary Notes for CB, Denis and Birkir</h2>
    <p>I think we should have these templates in Wordpress so we can easily add a discussion forum at the bottom.</p>
    <p>Must these pages practice progressive enhancement or only the widget?</p>
    <p>Can we use the word "imagine" in speaking of personas?</p>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <!--    Script for accordion to W3C Spec-->
    <script type="text/javascript">
        $(document).ready(function () {
            $(".clickme").each(function () {
                var n = $(this).attr("id");
                var n2 = $(this).next("p.moreinfo").attr("id");
                $(this).next("p.moreinfo").attr("aria-labelledby", n);
                $(this).attr("aria-controls", n2);
            });

            $(".moreinfo").css("display", "none").attr("role", "tabpanel").attr("aria-hidden", "true");
            $(".clickme").attr("aria-expanded", "false").attr("role", "tab").attr("tabindex", "-1");
            $("#tablist").attr("role", "tablist").attr("tabindex", "0");
            $("#tablist").attr("aria-multiselectable", "true");
            $(".clickme").focus(function () {
                $(this).attr("aria-selected", "true");
            });
            $(".clickme").blur(function () {
                $(this).removeAttr("aria-selected");
            });
            $(".clickme").click(function () {
                var n = $(this).next("p").css("display");
                if (n == "none") {
                    $(this).next("p").css("display", "block").removeAttr("aria-hidden");
                    $(this).attr("aria-expanded", "true");
                    $(this).children("span").attr("class", "minus");
                    $(this).focus();
                } else {
                    $(this).next("p").css("display", "none").attr("aria-hidden", "true");
                    $(this).attr("aria-expanded", "false");
                    $(this).children("span").attr("class", "plus");
                    $(this).focus();
                }
            });
            $("#tablist").focus(function () {
                $(this).on("keydown.tablist", function (e) {
                    var code = e.which;
                    if (code == 13 || code == 40 || code == 39) e.preventDefault();
                    if (code == 13 || code == 40 || code == 39) {
                        $(this).children("h2.clickme:first").focus();
                        $(this).off("keydown.tablist");
                    };
                });
            });

            $("#tablist").focusin(function () {
                $(this).on("keydown.esc", function (e) {
                    var code = e.which;
                    if (code == 27) e.preventDefault();
                    if (code == 27) {
                        $(".moreinfo").css("display", "none").attr("aria-hidden", "true");
                        $(".clickme").attr("aria-expanded", "false");
                        $(".clickme").children("span").attr("class", "plus");

                        $(this).focus();
                        $(this).off("keydown.esc");
                    };
                });
            });

            $(".moreinfo *").focus(function () {
                $(this).on("keydown.moreinfo", function (e) {
                    var code = e.which;
                    if (code == 38 || code == 37 || code == 40 || code == 39) e.preventDefault();
                    if (code == 40 || code == 39) {
                        //   console.log(code);
                        $(this).parent().next("h2.clickme").focus();
                        $(this).off("keydown.moreinfo");
                    };
                    if (code == 38 || code == 37) {
                        //  console.log(code);
                        $(this).parent().prev("h2.clickme").focus();
                        $(this).off("keydown.moreinfo");
                    };
                });
            });

            $(".clickme").keydown(function (e) {
                var code = e.which;
                if (code == 32 || code == 13 || code == 38 || code == 37 || code == 40 || code == 39) e.preventDefault();
                if (code == 32 || code == 13) {
                    $(this).click();
                };
                if (code == 38 || code == 37) {
                    $(this).prevAll("h2.clickme:first").focus();
                };
                if (code == 40 || code == 39) {
                    $(this).nextAll("h2.clickme:first").focus();
                };
            });
        });
    </script>
    <!--    Script for simple accordion-->
    <script>
        $(document).ready(function () {
            $(".simpmoreinfo").css("display", "none");
            $(".simpclickme button").attr("aria-expanded", "false");
        });

        $(".simpclickme button").click(function () {
            var n = $(this).parent().next("p").css("display");
            if (n == "none") {
                $(this).parent().next("p").css("display", "block");
                $(this).attr("aria-expanded", "true");
                $(this).children("span").attr("class", "minus");
            } else {
                $(this).parent().next("p").css("display", "none");
                $(this).attr("aria-expanded", "false");
                $(this).children("span").attr("class", "plus");
            }
        });
    </script>
</body>

</html>